<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Vista Mapping - MyHealtheVet PHR FHIR API v0.3.8</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<link href="assets/css/vha-ig-template.css" rel="stylesheet"/>



    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"3"}
    h3,h4,h5,h6{--heading-prefix:"3"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->

<div id="va-nav"> 
     <a id="va-logo" no-external="true" href="https://va.gov">
     <img height="50" alt="VA Organization" src="assets/images/va-header-logo.png"/>
     </a>
	 </div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">MyHealtheVet PHR FHIR API</span>
            <br/>
            <span style="display:inline-block;">0.3.8 - trial-use



  <img alt="United States of America flag" src="assets/images/usa.svg" height="16" title="United States of America"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="api.html">API</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Vista Mapping
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="background.html">background</a>
      </li>
      <li>
        <a href="background.html#allergy">Allergy</a>
      </li>
      <li>
        <a href="background.html#chem-hem">Chem-Hem</a>
      </li>
      <li>
        <a href="background.html#condition">Condition</a>
      </li>
      <li>
        <a href="background.html#ecg">ECG</a>
      </li>
      <li>
        <a href="background.html#immunization">Immunization</a>
      </li>
      <li>
        <a href="background.html#pathology-labreport">Pathology</a>
      </li>
      <li>
        <a href="background.html#microbiology-labreport">Microbioloy</a>
      </li>
      <li>
        <a href="background.html#notes">Notes</a>
      </li>
      <li>
        <a href="background.html#imaging-reports">Radiology</a>
      </li>
      <li>
        <a href="background.html#vital-sign">Vital-Sign</a>
      </li>
      <li>
        <a href="utility.html">Utility</a>
      </li>
      <li>
        <a href="ConvertDate.html">ConvertDate</a>
      </li>
      <li>
        <a href="identifier.html">Id vs Identifier</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="oh.html">Oracle Health</a>
  </li>
  <li>
    <a href="testplan.html">Test Plan</a>
  </li>
  <li>
    <a href="artifacts.html">Artifacts</a>
  </li>
  <li>
    <a href="downloads.html">About</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>Vista Mapping</b></li>

          <span style="float:right;">

            <a href="api.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="utility.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">MyHealtheVet PHR FHIR API - Local Development build (v0.3.8) built by the FHIR (HL7® FHIR® Standard) Build Tools. See the <a href="https://department-of-veterans-affairs.github.io/mhv-fhir-phr-mapping/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>Vista Mapping</h2>
  





  <table class="colsi">
    <tr>
  
      <td>
        <i>Page standards status:</i> <a href="http://hl7.org/fhir/R4/versions.html#std-process" title="Standard Status">Informative</a>
        
      </td>
  
  
    </tr>
  </table>








    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#utility-resources" id="markdown-toc-utility-resources">Utility Resources</a></li>
  <li><a href="#mapping-clinical-resources" id="markdown-toc-mapping-clinical-resources">mapping Clinical Resources</a></li>
  <li><a href="#potential" id="markdown-toc-potential">potential</a></li>
  <li><a href="#data-input-processing" id="markdown-toc-data-input-processing">Data input processing</a>    <ul>
      <li><a href="#general-processing-of-clinical-resources" id="markdown-toc-general-processing-of-clinical-resources">General Processing of clinical resources</a></li>
    </ul>
  </li>
  <li><a href="#entered-in-error" id="markdown-toc-entered-in-error">Entered-in-Error</a></li>
  <li><a href="#references" id="markdown-toc-references">References</a></li>
</ul>

</div>

<p>MyHealtheVet acts as a FHIR Server. It receives information from many sources and produces a given set of FHIR Resourrces</p>

<figure>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" preserveAspectRatio="none" version="1.1" viewBox="0 0 2015 523" zoomAndPan="magnify"><defs /><g><!--cluster source--><g id="cluster_source"><path d="M1022,6 L1072,6 A3.75,3.75 0 0 1 1074.5,8.5 L1081.5,29.6094 L1306,29.6094 A2.5,2.5 0 0 1 1308.5,32.1094 L1308.5,103.5 A2.5,2.5 0 0 1 1306,106 L1022,106 A2.5,2.5 0 0 1 1019.5,103.5 L1019.5,8.5 A2.5,2.5 0 0 1 1022,6 " fill="none" style="stroke:#000000;stroke-width:1.5;" /><line style="stroke:#000000;stroke-width:1.5;" x1="1019.5" x2="1081.5" y1="29.6094" y2="29.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="49" x="1023.5" y="22.5332">source</text></g><!--cluster fhir--><g id="cluster_fhir"><path d="M47,175 L72,175 A3.75,3.75 0 0 1 74.5,177.5 L81.5,198.6094 L2006,198.6094 A2.5,2.5 0 0 1 2008.5,201.1094 L2008.5,429.5 A2.5,2.5 0 0 1 2006,432 L47,432 A2.5,2.5 0 0 1 44.5,429.5 L44.5,177.5 A2.5,2.5 0 0 1 47,175 " fill="none" style="stroke:#000000;stroke-width:1.5;" /><line style="stroke:#000000;stroke-width:1.5;" x1="44.5" x2="81.5" y1="198.6094" y2="198.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="24" x="48.5" y="191.5332">fhir</text></g><!--cluster util--><g id="cluster_util"><path d="M1092,244.5 L1115,244.5 A3.75,3.75 0 0 1 1117.5,247 L1124.5,268.1094 L1616,268.1094 A2.5,2.5 0 0 1 1618.5,270.6094 L1618.5,360 A2.5,2.5 0 0 1 1616,362.5 L1092,362.5 A2.5,2.5 0 0 1 1089.5,360 L1089.5,247 A2.5,2.5 0 0 1 1092,244.5 " fill="none" style="stroke:#000000;stroke-width:1.5;" /><line style="stroke:#000000;stroke-width:1.5;" x1="1089.5" x2="1124.5" y1="268.1094" y2="268.1094" /><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="22" x="1093.5" y="261.0332">util</text></g><!--class HDR--><g id="elem_HDR"><rect codeLine="4" fill="#F1F1F1" height="48" id="HDR" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61" x="1124" y="42" /><ellipse cx="1139" cy="58" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M1141.7656,53.875 Q1141.9219,53.6563 1142.1094,53.5469 Q1142.2969,53.4375 1142.5156,53.4375 Q1142.8906,53.4375 1143.125,53.7031 Q1143.3594,53.9531 1143.3594,54.5625 L1143.3594,56.0156 Q1143.3594,56.625 1143.125,56.8906 Q1142.8906,57.1563 1142.5156,57.1563 Q1142.1719,57.1563 1141.9688,56.9531 Q1141.7656,56.7656 1141.6563,56.25 Q1141.6094,55.8906 1141.4219,55.7031 Q1141.0938,55.3281 1140.4844,55.1094 Q1139.875,54.8906 1139.25,54.8906 Q1138.4844,54.8906 1137.8438,55.2188 Q1137.2188,55.5469 1136.7188,56.2969 Q1136.2344,57.0469 1136.2344,58.0781 L1136.2344,59.1719 Q1136.2344,60.4063 1137.125,61.2344 Q1138.0156,62.0469 1139.6094,62.0469 Q1140.5469,62.0469 1141.2031,61.7969 Q1141.5938,61.6406 1142.0156,61.2031 Q1142.2813,60.9375 1142.4219,60.8594 Q1142.5781,60.7813 1142.7813,60.7813 Q1143.1094,60.7813 1143.3594,61.0469 Q1143.625,61.2969 1143.625,61.6406 Q1143.625,61.9844 1143.2813,62.3906 Q1142.7813,62.9688 1141.9844,63.2969 Q1140.9063,63.75 1139.6094,63.75 Q1138.0938,63.75 1136.8906,63.125 Q1135.9063,62.625 1135.2188,61.5625 Q1134.5313,60.4844 1134.5313,59.2031 L1134.5313,58.0469 Q1134.5313,56.7188 1135.1406,55.5781 Q1135.7656,54.4219 1136.8594,53.8125 Q1137.9531,53.1875 1139.1875,53.1875 Q1139.9219,53.1875 1140.5625,53.3594 Q1141.2188,53.5156 1141.7656,53.875 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="1153" y="63.7285">HDR</text><line style="stroke:#181818;stroke-width:0.5;" x1="1125" x2="1184" y1="74" y2="74" /><line style="stroke:#181818;stroke-width:0.5;" x1="1125" x2="1184" y1="82" y2="82" /></g><!--class VIA--><g id="elem_VIA"><rect codeLine="5" fill="#F1F1F1" height="48" id="VIA" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="1036" y="42" /><ellipse cx="1051" cy="58" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M1053.7656,53.875 Q1053.9219,53.6563 1054.1094,53.5469 Q1054.2969,53.4375 1054.5156,53.4375 Q1054.8906,53.4375 1055.125,53.7031 Q1055.3594,53.9531 1055.3594,54.5625 L1055.3594,56.0156 Q1055.3594,56.625 1055.125,56.8906 Q1054.8906,57.1563 1054.5156,57.1563 Q1054.1719,57.1563 1053.9688,56.9531 Q1053.7656,56.7656 1053.6563,56.25 Q1053.6094,55.8906 1053.4219,55.7031 Q1053.0938,55.3281 1052.4844,55.1094 Q1051.875,54.8906 1051.25,54.8906 Q1050.4844,54.8906 1049.8438,55.2188 Q1049.2188,55.5469 1048.7188,56.2969 Q1048.2344,57.0469 1048.2344,58.0781 L1048.2344,59.1719 Q1048.2344,60.4063 1049.125,61.2344 Q1050.0156,62.0469 1051.6094,62.0469 Q1052.5469,62.0469 1053.2031,61.7969 Q1053.5938,61.6406 1054.0156,61.2031 Q1054.2813,60.9375 1054.4219,60.8594 Q1054.5781,60.7813 1054.7813,60.7813 Q1055.1094,60.7813 1055.3594,61.0469 Q1055.625,61.2969 1055.625,61.6406 Q1055.625,61.9844 1055.2813,62.3906 Q1054.7813,62.9688 1053.9844,63.2969 Q1052.9063,63.75 1051.6094,63.75 Q1050.0938,63.75 1048.8906,63.125 Q1047.9063,62.625 1047.2188,61.5625 Q1046.5313,60.4844 1046.5313,59.2031 L1046.5313,58.0469 Q1046.5313,56.7188 1047.1406,55.5781 Q1047.7656,54.4219 1048.8594,53.8125 Q1049.9531,53.1875 1051.1875,53.1875 Q1051.9219,53.1875 1052.5625,53.3594 Q1053.2188,53.5156 1053.7656,53.875 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="1065" y="63.7285">VIA</text><line style="stroke:#181818;stroke-width:0.5;" x1="1037" x2="1088" y1="74" y2="74" /><line style="stroke:#181818;stroke-width:0.5;" x1="1037" x2="1088" y1="82" y2="82" /></g><!--class HL7v2--><g id="elem_HL7v2"><rect codeLine="6" fill="#F1F1F1" height="48" id="HL7v2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="1220.5" y="42" /><ellipse cx="1235.5" cy="58" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M1238.2656,53.875 Q1238.4219,53.6563 1238.6094,53.5469 Q1238.7969,53.4375 1239.0156,53.4375 Q1239.3906,53.4375 1239.625,53.7031 Q1239.8594,53.9531 1239.8594,54.5625 L1239.8594,56.0156 Q1239.8594,56.625 1239.625,56.8906 Q1239.3906,57.1563 1239.0156,57.1563 Q1238.6719,57.1563 1238.4688,56.9531 Q1238.2656,56.7656 1238.1563,56.25 Q1238.1094,55.8906 1237.9219,55.7031 Q1237.5938,55.3281 1236.9844,55.1094 Q1236.375,54.8906 1235.75,54.8906 Q1234.9844,54.8906 1234.3438,55.2188 Q1233.7188,55.5469 1233.2188,56.2969 Q1232.7344,57.0469 1232.7344,58.0781 L1232.7344,59.1719 Q1232.7344,60.4063 1233.625,61.2344 Q1234.5156,62.0469 1236.1094,62.0469 Q1237.0469,62.0469 1237.7031,61.7969 Q1238.0938,61.6406 1238.5156,61.2031 Q1238.7813,60.9375 1238.9219,60.8594 Q1239.0781,60.7813 1239.2813,60.7813 Q1239.6094,60.7813 1239.8594,61.0469 Q1240.125,61.2969 1240.125,61.6406 Q1240.125,61.9844 1239.7813,62.3906 Q1239.2813,62.9688 1238.4844,63.2969 Q1237.4063,63.75 1236.1094,63.75 Q1234.5938,63.75 1233.3906,63.125 Q1232.4063,62.625 1231.7188,61.5625 Q1231.0313,60.4844 1231.0313,59.2031 L1231.0313,58.0469 Q1231.0313,56.7188 1231.6406,55.5781 Q1232.2656,54.4219 1233.3594,53.8125 Q1234.4531,53.1875 1235.6875,53.1875 Q1236.4219,53.1875 1237.0625,53.3594 Q1237.7188,53.5156 1238.2656,53.875 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="1249.5" y="63.7285">HL7v2</text><line style="stroke:#181818;stroke-width:0.5;" x1="1221.5" x2="1291.5" y1="74" y2="74" /><line style="stroke:#181818;stroke-width:0.5;" x1="1221.5" x2="1291.5" y1="82" y2="82" /></g><!--class AllergyIntolerance--><g id="elem_AllergyIntolerance"><rect codeLine="18" fill="#F1F1F1" height="48" id="AllergyIntolerance" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145" x="925" y="289.5" /><ellipse cx="940" cy="305.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M942.7656,301.375 Q942.9219,301.1563 943.1094,301.0469 Q943.2969,300.9375 943.5156,300.9375 Q943.8906,300.9375 944.125,301.2031 Q944.3594,301.4531 944.3594,302.0625 L944.3594,303.5156 Q944.3594,304.125 944.125,304.3906 Q943.8906,304.6563 943.5156,304.6563 Q943.1719,304.6563 942.9688,304.4531 Q942.7656,304.2656 942.6563,303.75 Q942.6094,303.3906 942.4219,303.2031 Q942.0938,302.8281 941.4844,302.6094 Q940.875,302.3906 940.25,302.3906 Q939.4844,302.3906 938.8438,302.7188 Q938.2188,303.0469 937.7188,303.7969 Q937.2344,304.5469 937.2344,305.5781 L937.2344,306.6719 Q937.2344,307.9063 938.125,308.7344 Q939.0156,309.5469 940.6094,309.5469 Q941.5469,309.5469 942.2031,309.2969 Q942.5938,309.1406 943.0156,308.7031 Q943.2813,308.4375 943.4219,308.3594 Q943.5781,308.2813 943.7813,308.2813 Q944.1094,308.2813 944.3594,308.5469 Q944.625,308.7969 944.625,309.1406 Q944.625,309.4844 944.2813,309.8906 Q943.7813,310.4688 942.9844,310.7969 Q941.9063,311.25 940.6094,311.25 Q939.0938,311.25 937.8906,310.625 Q936.9063,310.125 936.2188,309.0625 Q935.5313,307.9844 935.5313,306.7031 L935.5313,305.5469 Q935.5313,304.2188 936.1406,303.0781 Q936.7656,301.9219 937.8594,301.3125 Q938.9531,300.6875 940.1875,300.6875 Q940.9219,300.6875 941.5625,300.8594 Q942.2188,301.0156 942.7656,301.375 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="954" y="311.2285">AllergyIntolerance</text><line style="stroke:#181818;stroke-width:0.5;" x1="926" x2="1069" y1="321.5" y2="321.5" /><line style="stroke:#181818;stroke-width:0.5;" x1="926" x2="1069" y1="329.5" y2="329.5" /></g><!--class Immunization--><g id="elem_Immunization"><rect codeLine="19" fill="#F1F1F1" height="48" id="Immunization" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="88" y="289.5" /><ellipse cx="103" cy="305.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M105.7656,301.375 Q105.9219,301.1563 106.1094,301.0469 Q106.2969,300.9375 106.5156,300.9375 Q106.8906,300.9375 107.125,301.2031 Q107.3594,301.4531 107.3594,302.0625 L107.3594,303.5156 Q107.3594,304.125 107.125,304.3906 Q106.8906,304.6563 106.5156,304.6563 Q106.1719,304.6563 105.9688,304.4531 Q105.7656,304.2656 105.6563,303.75 Q105.6094,303.3906 105.4219,303.2031 Q105.0938,302.8281 104.4844,302.6094 Q103.875,302.3906 103.25,302.3906 Q102.4844,302.3906 101.8438,302.7188 Q101.2188,303.0469 100.7188,303.7969 Q100.2344,304.5469 100.2344,305.5781 L100.2344,306.6719 Q100.2344,307.9063 101.125,308.7344 Q102.0156,309.5469 103.6094,309.5469 Q104.5469,309.5469 105.2031,309.2969 Q105.5938,309.1406 106.0156,308.7031 Q106.2813,308.4375 106.4219,308.3594 Q106.5781,308.2813 106.7813,308.2813 Q107.1094,308.2813 107.3594,308.5469 Q107.625,308.7969 107.625,309.1406 Q107.625,309.4844 107.2813,309.8906 Q106.7813,310.4688 105.9844,310.7969 Q104.9063,311.25 103.6094,311.25 Q102.0938,311.25 100.8906,310.625 Q99.9063,310.125 99.2188,309.0625 Q98.5313,307.9844 98.5313,306.7031 L98.5313,305.5469 Q98.5313,304.2188 99.1406,303.0781 Q99.7656,301.9219 100.8594,301.3125 Q101.9531,300.6875 103.1875,300.6875 Q103.9219,300.6875 104.5625,300.8594 Q105.2188,301.0156 105.7656,301.375 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="117" y="311.2285">Immunization</text><line style="stroke:#181818;stroke-width:0.5;" x1="89" x2="200" y1="321.5" y2="321.5" /><line style="stroke:#181818;stroke-width:0.5;" x1="89" x2="200" y1="329.5" y2="329.5" /></g><!--class Condition--><g id="elem_Condition"><rect codeLine="20" fill="#F1F1F1" height="48" id="Condition" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="236.5" y="289.5" /><ellipse cx="251.5" cy="305.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M254.2656,301.375 Q254.4219,301.1563 254.6094,301.0469 Q254.7969,300.9375 255.0156,300.9375 Q255.3906,300.9375 255.625,301.2031 Q255.8594,301.4531 255.8594,302.0625 L255.8594,303.5156 Q255.8594,304.125 255.625,304.3906 Q255.3906,304.6563 255.0156,304.6563 Q254.6719,304.6563 254.4688,304.4531 Q254.2656,304.2656 254.1563,303.75 Q254.1094,303.3906 253.9219,303.2031 Q253.5938,302.8281 252.9844,302.6094 Q252.375,302.3906 251.75,302.3906 Q250.9844,302.3906 250.3438,302.7188 Q249.7188,303.0469 249.2188,303.7969 Q248.7344,304.5469 248.7344,305.5781 L248.7344,306.6719 Q248.7344,307.9063 249.625,308.7344 Q250.5156,309.5469 252.1094,309.5469 Q253.0469,309.5469 253.7031,309.2969 Q254.0938,309.1406 254.5156,308.7031 Q254.7813,308.4375 254.9219,308.3594 Q255.0781,308.2813 255.2813,308.2813 Q255.6094,308.2813 255.8594,308.5469 Q256.125,308.7969 256.125,309.1406 Q256.125,309.4844 255.7813,309.8906 Q255.2813,310.4688 254.4844,310.7969 Q253.4063,311.25 252.1094,311.25 Q250.5938,311.25 249.3906,310.625 Q248.4063,310.125 247.7188,309.0625 Q247.0313,307.9844 247.0313,306.7031 L247.0313,305.5469 Q247.0313,304.2188 247.6406,303.0781 Q248.2656,301.9219 249.3594,301.3125 Q250.4531,300.6875 251.6875,300.6875 Q252.4219,300.6875 253.0625,300.8594 Q253.7188,301.0156 254.2656,301.375 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="265.5" y="311.2285">Condition</text><line style="stroke:#181818;stroke-width:0.5;" x1="237.5" x2="327.5" y1="321.5" y2="321.5" /><line style="stroke:#181818;stroke-width:0.5;" x1="237.5" x2="327.5" y1="329.5" y2="329.5" /></g><!--class DiagnosticReport--><g id="elem_DiagnosticReport"><rect codeLine="21" fill="#F1F1F1" height="188.875" id="DiagnosticReport" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="749" y="219" /><ellipse cx="764" cy="235" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M766.7656,230.875 Q766.9219,230.6563 767.1094,230.5469 Q767.2969,230.4375 767.5156,230.4375 Q767.8906,230.4375 768.125,230.7031 Q768.3594,230.9531 768.3594,231.5625 L768.3594,233.0156 Q768.3594,233.625 768.125,233.8906 Q767.8906,234.1563 767.5156,234.1563 Q767.1719,234.1563 766.9688,233.9531 Q766.7656,233.7656 766.6563,233.25 Q766.6094,232.8906 766.4219,232.7031 Q766.0938,232.3281 765.4844,232.1094 Q764.875,231.8906 764.25,231.8906 Q763.4844,231.8906 762.8438,232.2188 Q762.2188,232.5469 761.7188,233.2969 Q761.2344,234.0469 761.2344,235.0781 L761.2344,236.1719 Q761.2344,237.4063 762.125,238.2344 Q763.0156,239.0469 764.6094,239.0469 Q765.5469,239.0469 766.2031,238.7969 Q766.5938,238.6406 767.0156,238.2031 Q767.2813,237.9375 767.4219,237.8594 Q767.5781,237.7813 767.7813,237.7813 Q768.1094,237.7813 768.3594,238.0469 Q768.625,238.2969 768.625,238.6406 Q768.625,238.9844 768.2813,239.3906 Q767.7813,239.9688 766.9844,240.2969 Q765.9063,240.75 764.6094,240.75 Q763.0938,240.75 761.8906,240.125 Q760.9063,239.625 760.2188,238.5625 Q759.5313,237.4844 759.5313,236.2031 L759.5313,235.0469 Q759.5313,233.7188 760.1406,232.5781 Q760.7656,231.4219 761.8594,230.8125 Q762.9531,230.1875 764.1875,230.1875 Q764.9219,230.1875 765.5625,230.3594 Q766.2188,230.5156 766.7656,230.875 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="778" y="240.7285">DiagnosticReport</text><line style="stroke:#181818;stroke-width:0.5;" x1="750" x2="889" y1="251" y2="251" /><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="757" y="262.3047" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="769" y="269.5332">VIA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="769" y="287.1426">-- lab</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="769" y="304.752">-- imaging</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="757" y="315.1328" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="769" y="322.3613">HDR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="769" y="339.9707">-- chem</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="769" y="357.5801">-- hem</text><line style="stroke:#181818;stroke-width:0.5;" x1="750" x2="889" y1="364.6563" y2="364.6563" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="755" y="383.1895">Specimen()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="755" y="400.7988">Observation()</text></g><!--class DocumentReference--><g id="elem_DocumentReference"><rect codeLine="31" fill="#F1F1F1" height="118.4375" id="DocumentReference" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="363.5" y="254.5" /><ellipse cx="378.5" cy="270.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M381.2656,266.375 Q381.4219,266.1563 381.6094,266.0469 Q381.7969,265.9375 382.0156,265.9375 Q382.3906,265.9375 382.625,266.2031 Q382.8594,266.4531 382.8594,267.0625 L382.8594,268.5156 Q382.8594,269.125 382.625,269.3906 Q382.3906,269.6563 382.0156,269.6563 Q381.6719,269.6563 381.4688,269.4531 Q381.2656,269.2656 381.1563,268.75 Q381.1094,268.3906 380.9219,268.2031 Q380.5938,267.8281 379.9844,267.6094 Q379.375,267.3906 378.75,267.3906 Q377.9844,267.3906 377.3438,267.7188 Q376.7188,268.0469 376.2188,268.7969 Q375.7344,269.5469 375.7344,270.5781 L375.7344,271.6719 Q375.7344,272.9063 376.625,273.7344 Q377.5156,274.5469 379.1094,274.5469 Q380.0469,274.5469 380.7031,274.2969 Q381.0938,274.1406 381.5156,273.7031 Q381.7813,273.4375 381.9219,273.3594 Q382.0781,273.2813 382.2813,273.2813 Q382.6094,273.2813 382.8594,273.5469 Q383.125,273.7969 383.125,274.1406 Q383.125,274.4844 382.7813,274.8906 Q382.2813,275.4688 381.4844,275.7969 Q380.4063,276.25 379.1094,276.25 Q377.5938,276.25 376.3906,275.625 Q375.4063,275.125 374.7188,274.0625 Q374.0313,272.9844 374.0313,271.7031 L374.0313,270.5469 Q374.0313,269.2188 374.6406,268.0781 Q375.2656,266.9219 376.3594,266.3125 Q377.4531,265.6875 378.6875,265.6875 Q379.4219,265.6875 380.0625,265.8594 Q380.7188,266.0156 381.2656,266.375 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="392.5" y="276.2285">DocumentReference</text><line style="stroke:#181818;stroke-width:0.5;" x1="364.5" x2="524.5" y1="286.5" y2="286.5" /><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="371.5" y="297.8047" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="383.5" y="305.0332">Progress Note</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="371.5" y="315.4141" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="383.5" y="322.6426">Discharge Summary</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="371.5" y="333.0234" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="383.5" y="340.252">Consultation Note</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="371.5" y="350.6328" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="383.5" y="357.8613">ECG Report</text><line style="stroke:#181818;stroke-width:0.5;" x1="364.5" x2="524.5" y1="364.9375" y2="364.9375" /></g><!--class Observation--><g id="elem_Observation"><rect codeLine="37" fill="#F1F1F1" height="171.2656" id="Observation" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="561" y="228" /><ellipse cx="595.8" cy="244" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M598.5656,239.875 Q598.7219,239.6563 598.9094,239.5469 Q599.0969,239.4375 599.3156,239.4375 Q599.6906,239.4375 599.925,239.7031 Q600.1594,239.9531 600.1594,240.5625 L600.1594,242.0156 Q600.1594,242.625 599.925,242.8906 Q599.6906,243.1563 599.3156,243.1563 Q598.9719,243.1563 598.7688,242.9531 Q598.5656,242.7656 598.4563,242.25 Q598.4094,241.8906 598.2219,241.7031 Q597.8938,241.3281 597.2844,241.1094 Q596.675,240.8906 596.05,240.8906 Q595.2844,240.8906 594.6438,241.2188 Q594.0188,241.5469 593.5188,242.2969 Q593.0344,243.0469 593.0344,244.0781 L593.0344,245.1719 Q593.0344,246.4063 593.925,247.2344 Q594.8156,248.0469 596.4094,248.0469 Q597.3469,248.0469 598.0031,247.7969 Q598.3938,247.6406 598.8156,247.2031 Q599.0813,246.9375 599.2219,246.8594 Q599.3781,246.7813 599.5813,246.7813 Q599.9094,246.7813 600.1594,247.0469 Q600.425,247.2969 600.425,247.6406 Q600.425,247.9844 600.0813,248.3906 Q599.5813,248.9688 598.7844,249.2969 Q597.7063,249.75 596.4094,249.75 Q594.8938,249.75 593.6906,249.125 Q592.7063,248.625 592.0188,247.5625 Q591.3313,246.4844 591.3313,245.2031 L591.3313,244.0469 Q591.3313,242.7188 591.9406,241.5781 Q592.5656,240.4219 593.6594,239.8125 Q594.7531,239.1875 595.9875,239.1875 Q596.7219,239.1875 597.3625,239.3594 Q598.0188,239.5156 598.5656,239.875 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="614.2" y="249.7285">Observation</text><line style="stroke:#181818;stroke-width:0.5;" x1="562" x2="713" y1="260" y2="260" /><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="569" y="271.3047" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="581" y="278.5332">BLOOD PRESSURE</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="569" y="288.9141" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="581" y="296.1426">HEIGHT</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="569" y="306.5234" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="581" y="313.752">WEIGHT</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="569" y="324.1328" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="581" y="331.3613">PULSE</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="569" y="341.7422" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="581" y="348.9707">PAIN</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="569" y="359.3516" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="581" y="366.5801">RESPIRATION</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="569" y="376.9609" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="581" y="384.1895">TEMPERATURE</text><line style="stroke:#181818;stroke-width:0.5;" x1="562" x2="713" y1="391.2656" y2="391.2656" /></g><!--class MedicationRequest--><g id="elem_MedicationRequest"><rect codeLine="46" fill="#F1F1F1" height="48" id="MedicationRequest" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="1637" y="289.5" /><ellipse cx="1652" cy="305.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M1654.7656,301.375 Q1654.9219,301.1563 1655.1094,301.0469 Q1655.2969,300.9375 1655.5156,300.9375 Q1655.8906,300.9375 1656.125,301.2031 Q1656.3594,301.4531 1656.3594,302.0625 L1656.3594,303.5156 Q1656.3594,304.125 1656.125,304.3906 Q1655.8906,304.6563 1655.5156,304.6563 Q1655.1719,304.6563 1654.9688,304.4531 Q1654.7656,304.2656 1654.6563,303.75 Q1654.6094,303.3906 1654.4219,303.2031 Q1654.0938,302.8281 1653.4844,302.6094 Q1652.875,302.3906 1652.25,302.3906 Q1651.4844,302.3906 1650.8438,302.7188 Q1650.2188,303.0469 1649.7188,303.7969 Q1649.2344,304.5469 1649.2344,305.5781 L1649.2344,306.6719 Q1649.2344,307.9063 1650.125,308.7344 Q1651.0156,309.5469 1652.6094,309.5469 Q1653.5469,309.5469 1654.2031,309.2969 Q1654.5938,309.1406 1655.0156,308.7031 Q1655.2813,308.4375 1655.4219,308.3594 Q1655.5781,308.2813 1655.7813,308.2813 Q1656.1094,308.2813 1656.3594,308.5469 Q1656.625,308.7969 1656.625,309.1406 Q1656.625,309.4844 1656.2813,309.8906 Q1655.7813,310.4688 1654.9844,310.7969 Q1653.9063,311.25 1652.6094,311.25 Q1651.0938,311.25 1649.8906,310.625 Q1648.9063,310.125 1648.2188,309.0625 Q1647.5313,307.9844 1647.5313,306.7031 L1647.5313,305.5469 Q1647.5313,304.2188 1648.1406,303.0781 Q1648.7656,301.9219 1649.8594,301.3125 Q1650.9531,300.6875 1652.1875,300.6875 Q1652.9219,300.6875 1653.5625,300.8594 Q1654.2188,301.0156 1654.7656,301.375 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="1666" y="311.2285">MedicationRequest</text><line style="stroke:#181818;stroke-width:0.5;" x1="1638" x2="1789" y1="321.5" y2="321.5" /><line style="stroke:#181818;stroke-width:0.5;" x1="1638" x2="1789" y1="329.5" y2="329.5" /></g><!--class MedicationDispense--><g id="elem_MedicationDispense"><rect codeLine="47" fill="#F1F1F1" height="48" id="MedicationDispense" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159" x="1825" y="289.5" /><ellipse cx="1840" cy="305.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M1842.7656,301.375 Q1842.9219,301.1563 1843.1094,301.0469 Q1843.2969,300.9375 1843.5156,300.9375 Q1843.8906,300.9375 1844.125,301.2031 Q1844.3594,301.4531 1844.3594,302.0625 L1844.3594,303.5156 Q1844.3594,304.125 1844.125,304.3906 Q1843.8906,304.6563 1843.5156,304.6563 Q1843.1719,304.6563 1842.9688,304.4531 Q1842.7656,304.2656 1842.6563,303.75 Q1842.6094,303.3906 1842.4219,303.2031 Q1842.0938,302.8281 1841.4844,302.6094 Q1840.875,302.3906 1840.25,302.3906 Q1839.4844,302.3906 1838.8438,302.7188 Q1838.2188,303.0469 1837.7188,303.7969 Q1837.2344,304.5469 1837.2344,305.5781 L1837.2344,306.6719 Q1837.2344,307.9063 1838.125,308.7344 Q1839.0156,309.5469 1840.6094,309.5469 Q1841.5469,309.5469 1842.2031,309.2969 Q1842.5938,309.1406 1843.0156,308.7031 Q1843.2813,308.4375 1843.4219,308.3594 Q1843.5781,308.2813 1843.7813,308.2813 Q1844.1094,308.2813 1844.3594,308.5469 Q1844.625,308.7969 1844.625,309.1406 Q1844.625,309.4844 1844.2813,309.8906 Q1843.7813,310.4688 1842.9844,310.7969 Q1841.9063,311.25 1840.6094,311.25 Q1839.0938,311.25 1837.8906,310.625 Q1836.9063,310.125 1836.2188,309.0625 Q1835.5313,307.9844 1835.5313,306.7031 L1835.5313,305.5469 Q1835.5313,304.2188 1836.1406,303.0781 Q1836.7656,301.9219 1837.8594,301.3125 Q1838.9531,300.6875 1840.1875,300.6875 Q1840.9219,300.6875 1841.5625,300.8594 Q1842.2188,301.0156 1842.7656,301.375 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="1854" y="311.2285">MedicationDispense</text><line style="stroke:#181818;stroke-width:0.5;" x1="1826" x2="1983" y1="321.5" y2="321.5" /><line style="stroke:#181818;stroke-width:0.5;" x1="1826" x2="1983" y1="329.5" y2="329.5" /></g><!--class Patient--><g id="elem_Patient"><rect codeLine="11" fill="#F1F1F1" height="65.6094" id="Patient" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="1513" y="280.5" /><ellipse cx="1533.85" cy="296.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M1536.6156,292.375 Q1536.7719,292.1563 1536.9594,292.0469 Q1537.1469,291.9375 1537.3656,291.9375 Q1537.7406,291.9375 1537.975,292.2031 Q1538.2094,292.4531 1538.2094,293.0625 L1538.2094,294.5156 Q1538.2094,295.125 1537.975,295.3906 Q1537.7406,295.6563 1537.3656,295.6563 Q1537.0219,295.6563 1536.8188,295.4531 Q1536.6156,295.2656 1536.5063,294.75 Q1536.4594,294.3906 1536.2719,294.2031 Q1535.9438,293.8281 1535.3344,293.6094 Q1534.725,293.3906 1534.1,293.3906 Q1533.3344,293.3906 1532.6938,293.7188 Q1532.0688,294.0469 1531.5688,294.7969 Q1531.0844,295.5469 1531.0844,296.5781 L1531.0844,297.6719 Q1531.0844,298.9063 1531.975,299.7344 Q1532.8656,300.5469 1534.4594,300.5469 Q1535.3969,300.5469 1536.0531,300.2969 Q1536.4438,300.1406 1536.8656,299.7031 Q1537.1313,299.4375 1537.2719,299.3594 Q1537.4281,299.2813 1537.6313,299.2813 Q1537.9594,299.2813 1538.2094,299.5469 Q1538.475,299.7969 1538.475,300.1406 Q1538.475,300.4844 1538.1313,300.8906 Q1537.6313,301.4688 1536.8344,301.7969 Q1535.7563,302.25 1534.4594,302.25 Q1532.9438,302.25 1531.7406,301.625 Q1530.7563,301.125 1530.0688,300.0625 Q1529.3813,298.9844 1529.3813,297.7031 L1529.3813,296.5469 Q1529.3813,295.2188 1529.9906,294.0781 Q1530.6156,292.9219 1531.7094,292.3125 Q1532.8031,291.6875 1534.0375,291.6875 Q1534.7719,291.6875 1535.4125,291.8594 Q1536.0688,292.0156 1536.6156,292.375 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="1549.15" y="302.2285">Patient</text><line style="stroke:#181818;stroke-width:0.5;" x1="1514" x2="1601" y1="312.5" y2="312.5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1519" y="331.0332">MHV Patient</text><line style="stroke:#181818;stroke-width:0.5;" x1="1514" x2="1601" y1="338.1094" y2="338.1094" /></g><!--class Practitioner--><g id="elem_Practitioner"><rect codeLine="14" fill="#F1F1F1" height="48" id="Practitioner" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="1373.5" y="289.5" /><ellipse cx="1388.5" cy="305.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M1391.2656,301.375 Q1391.4219,301.1563 1391.6094,301.0469 Q1391.7969,300.9375 1392.0156,300.9375 Q1392.3906,300.9375 1392.625,301.2031 Q1392.8594,301.4531 1392.8594,302.0625 L1392.8594,303.5156 Q1392.8594,304.125 1392.625,304.3906 Q1392.3906,304.6563 1392.0156,304.6563 Q1391.6719,304.6563 1391.4688,304.4531 Q1391.2656,304.2656 1391.1563,303.75 Q1391.1094,303.3906 1390.9219,303.2031 Q1390.5938,302.8281 1389.9844,302.6094 Q1389.375,302.3906 1388.75,302.3906 Q1387.9844,302.3906 1387.3438,302.7188 Q1386.7188,303.0469 1386.2188,303.7969 Q1385.7344,304.5469 1385.7344,305.5781 L1385.7344,306.6719 Q1385.7344,307.9063 1386.625,308.7344 Q1387.5156,309.5469 1389.1094,309.5469 Q1390.0469,309.5469 1390.7031,309.2969 Q1391.0938,309.1406 1391.5156,308.7031 Q1391.7813,308.4375 1391.9219,308.3594 Q1392.0781,308.2813 1392.2813,308.2813 Q1392.6094,308.2813 1392.8594,308.5469 Q1393.125,308.7969 1393.125,309.1406 Q1393.125,309.4844 1392.7813,309.8906 Q1392.2813,310.4688 1391.4844,310.7969 Q1390.4063,311.25 1389.1094,311.25 Q1387.5938,311.25 1386.3906,310.625 Q1385.4063,310.125 1384.7188,309.0625 Q1384.0313,307.9844 1384.0313,306.7031 L1384.0313,305.5469 Q1384.0313,304.2188 1384.6406,303.0781 Q1385.2656,301.9219 1386.3594,301.3125 Q1387.4531,300.6875 1388.6875,300.6875 Q1389.4219,300.6875 1390.0625,300.8594 Q1390.7188,301.0156 1391.2656,301.375 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="1402.5" y="311.2285">Practitioner</text><line style="stroke:#181818;stroke-width:0.5;" x1="1374.5" x2="1476.5" y1="321.5" y2="321.5" /><line style="stroke:#181818;stroke-width:0.5;" x1="1374.5" x2="1476.5" y1="329.5" y2="329.5" /></g><!--class Location--><g id="elem_Location"><rect codeLine="15" fill="#F1F1F1" height="48" id="Location" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="1105.5" y="289.5" /><ellipse cx="1120.5" cy="305.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M1123.2656,301.375 Q1123.4219,301.1563 1123.6094,301.0469 Q1123.7969,300.9375 1124.0156,300.9375 Q1124.3906,300.9375 1124.625,301.2031 Q1124.8594,301.4531 1124.8594,302.0625 L1124.8594,303.5156 Q1124.8594,304.125 1124.625,304.3906 Q1124.3906,304.6563 1124.0156,304.6563 Q1123.6719,304.6563 1123.4688,304.4531 Q1123.2656,304.2656 1123.1563,303.75 Q1123.1094,303.3906 1122.9219,303.2031 Q1122.5938,302.8281 1121.9844,302.6094 Q1121.375,302.3906 1120.75,302.3906 Q1119.9844,302.3906 1119.3438,302.7188 Q1118.7188,303.0469 1118.2188,303.7969 Q1117.7344,304.5469 1117.7344,305.5781 L1117.7344,306.6719 Q1117.7344,307.9063 1118.625,308.7344 Q1119.5156,309.5469 1121.1094,309.5469 Q1122.0469,309.5469 1122.7031,309.2969 Q1123.0938,309.1406 1123.5156,308.7031 Q1123.7813,308.4375 1123.9219,308.3594 Q1124.0781,308.2813 1124.2813,308.2813 Q1124.6094,308.2813 1124.8594,308.5469 Q1125.125,308.7969 1125.125,309.1406 Q1125.125,309.4844 1124.7813,309.8906 Q1124.2813,310.4688 1123.4844,310.7969 Q1122.4063,311.25 1121.1094,311.25 Q1119.5938,311.25 1118.3906,310.625 Q1117.4063,310.125 1116.7188,309.0625 Q1116.0313,307.9844 1116.0313,306.7031 L1116.0313,305.5469 Q1116.0313,304.2188 1116.6406,303.0781 Q1117.2656,301.9219 1118.3594,301.3125 Q1119.4531,300.6875 1120.6875,300.6875 Q1121.4219,300.6875 1122.0625,300.8594 Q1122.7188,301.0156 1123.2656,301.375 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1134.5" y="311.2285">Location</text><line style="stroke:#181818;stroke-width:0.5;" x1="1106.5" x2="1190.5" y1="321.5" y2="321.5" /><line style="stroke:#181818;stroke-width:0.5;" x1="1106.5" x2="1190.5" y1="329.5" y2="329.5" /></g><!--class Organization--><g id="elem_Organization"><rect codeLine="16" fill="#F1F1F1" height="48" id="Organization" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="1226.5" y="289.5" /><ellipse cx="1241.5" cy="305.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M1244.2656,301.375 Q1244.4219,301.1563 1244.6094,301.0469 Q1244.7969,300.9375 1245.0156,300.9375 Q1245.3906,300.9375 1245.625,301.2031 Q1245.8594,301.4531 1245.8594,302.0625 L1245.8594,303.5156 Q1245.8594,304.125 1245.625,304.3906 Q1245.3906,304.6563 1245.0156,304.6563 Q1244.6719,304.6563 1244.4688,304.4531 Q1244.2656,304.2656 1244.1563,303.75 Q1244.1094,303.3906 1243.9219,303.2031 Q1243.5938,302.8281 1242.9844,302.6094 Q1242.375,302.3906 1241.75,302.3906 Q1240.9844,302.3906 1240.3438,302.7188 Q1239.7188,303.0469 1239.2188,303.7969 Q1238.7344,304.5469 1238.7344,305.5781 L1238.7344,306.6719 Q1238.7344,307.9063 1239.625,308.7344 Q1240.5156,309.5469 1242.1094,309.5469 Q1243.0469,309.5469 1243.7031,309.2969 Q1244.0938,309.1406 1244.5156,308.7031 Q1244.7813,308.4375 1244.9219,308.3594 Q1245.0781,308.2813 1245.2813,308.2813 Q1245.6094,308.2813 1245.8594,308.5469 Q1246.125,308.7969 1246.125,309.1406 Q1246.125,309.4844 1245.7813,309.8906 Q1245.2813,310.4688 1244.4844,310.7969 Q1243.4063,311.25 1242.1094,311.25 Q1240.5938,311.25 1239.3906,310.625 Q1238.4063,310.125 1237.7188,309.0625 Q1237.0313,307.9844 1237.0313,306.7031 L1237.0313,305.5469 Q1237.0313,304.2188 1237.6406,303.0781 Q1238.2656,301.9219 1239.3594,301.3125 Q1240.4531,300.6875 1241.6875,300.6875 Q1242.4219,300.6875 1243.0625,300.8594 Q1243.7188,301.0156 1244.2656,301.375 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="1255.5" y="311.2285">Organization</text><line style="stroke:#181818;stroke-width:0.5;" x1="1227.5" x2="1337.5" y1="321.5" y2="321.5" /><line style="stroke:#181818;stroke-width:0.5;" x1="1227.5" x2="1337.5" y1="329.5" y2="329.5" /></g><!--class API--><g id="elem_API"><rect codeLine="73" fill="#F1F1F1" height="48" id="API" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="7" y="468" /><ellipse cx="22" cy="484" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;" /><path d="M22.9531,480.6406 L22.9531,487.2969 L24.6719,487.2969 Q25.2813,487.2969 25.5469,487.5313 Q25.8125,487.7656 25.8125,488.1563 Q25.8125,488.5313 25.5469,488.7656 Q25.2813,489 24.6719,489 L19.5313,489 Q18.9219,489 18.6563,488.7656 Q18.3906,488.5313 18.3906,488.1406 Q18.3906,487.7656 18.6563,487.5313 Q18.9219,487.2969 19.5313,487.2969 L21.25,487.2969 L21.25,480.6406 L19.5313,480.6406 Q18.9219,480.6406 18.6563,480.4063 Q18.3906,480.1719 18.3906,479.7813 Q18.3906,479.4063 18.6563,479.1719 Q18.9219,478.9375 19.5313,478.9375 L24.6719,478.9375 Q25.2813,478.9375 25.5469,479.1719 Q25.8125,479.4063 25.8125,479.7813 Q25.8125,480.1719 25.5469,480.4063 Q25.2813,480.6406 24.6719,480.6406 L22.9531,480.6406 Z " fill="#000000" /><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="59" x="36" y="489.7285">FHIR API</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="97" y1="500" y2="500" /><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="97" y1="508" y2="508" /></g><!--link HL7v2 to MedicationRequest--><g id="link_HL7v2_MedicationRequest"><path codeLine="50" d="M1292.6,67.51 C1362.27,70.21 1517.32,84.8 1618.5,159 C1662.1,190.97 1690.08,249.56 1703.69,284.37 " fill="none" id="HL7v2-to-MedicationRequest" style="stroke:#0000FF;stroke-width:1.0;" /><polygon fill="#0000FF" points="1705.59,289.33,1706.1127,279.495,1703.8047,284.6596,1698.6401,282.3515,1705.59,289.33" style="stroke:#0000FF;stroke-width:1.0;" /></g><!--link HL7v2 to MedicationDispense--><g id="link_HL7v2_MedicationDispense"><path codeLine="51" d="M1292.53,69.2 C1400.95,76.41 1721.97,102.18 1807.5,159 C1853.05,189.26 1881.41,248.99 1894.96,284.36 " fill="none" id="HL7v2-to-MedicationDispense" style="stroke:#0000FF;stroke-width:1.0;" /><polygon fill="#0000FF" points="1896.85,289.39,1897.4352,279.5585,1895.0944,284.7084,1889.9446,282.3675,1896.85,289.39" style="stroke:#0000FF;stroke-width:1.0;" /></g><!--link HL7v2 to Patient--><g id="link_HL7v2_Patient"><path codeLine="52" d="M1292.67,67.09 C1350.85,69.31 1464.84,82.62 1525.5,150 C1557.72,185.79 1561.48,244.31 1560.22,280.5 " fill="none" id="HL7v2-Patient" style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /></g><!--link VIA to Patient--><g id="link_VIA_Patient"><path codeLine="54" d="M1078.4,90.03 C1085.85,99.01 1095.52,108.47 1106.5,114 C1145.36,133.58 1460.89,132.63 1495.5,159 C1533.68,188.09 1548.43,244.55 1554.07,280.29 " fill="none" id="VIA-Patient" style="stroke:#FF0000;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /></g><!--link VIA to Practitioner--><g id="link_VIA_Practitioner"><path codeLine="55" d="M1078.98,90.18 C1086.41,98.97 1095.9,108.23 1106.5,114 C1118.9,120.74 1345.38,150.31 1356.5,159 C1396.33,190.12 1413.84,249.27 1421,284.37 " fill="none" id="VIA-to-Practitioner" style="stroke:#FF0000;stroke-width:1.0;" /><polygon fill="#FF0000" points="1421.99,289.36,1424.1956,279.7613,1421.0341,284.4522,1416.3432,281.2907,1421.99,289.36" style="stroke:#FF0000;stroke-width:1.0;" /></g><!--link VIA to Location--><g id="link_VIA_Location"><path codeLine="56" d="M1049.1,90.37 C1040.43,108.92 1033.18,134.4 1047.5,151 C1063.35,169.37 1083.11,143.18 1101.5,159 C1137.9,190.31 1146.59,249 1148.39,284.04 " fill="none" id="VIA-to-Location" style="stroke:#FF0000;stroke-width:1.0;" /><polygon fill="#FF0000" points="1148.62,289.45,1152.2298,280.2865,1148.4053,284.4546,1144.2372,280.6301,1148.62,289.45" style="stroke:#FF0000;stroke-width:1.0;" /></g><!--link VIA to Organization--><g id="link_VIA_Organization"><path codeLine="57" d="M1081.03,90.38 C1088.34,98.58 1097.21,107.39 1106.5,114 C1139.4,137.43 1152.3,135.27 1189.5,151 C1198.32,154.73 1202.52,152.45 1209.5,159 C1246.31,193.55 1266.53,250.48 1275.88,284.44 " fill="none" id="VIA-to-Organization" style="stroke:#FF0000;stroke-width:1.0;" /><polygon fill="#FF0000" points="1277.19,289.28,1278.7127,279.5496,1275.8901,284.4519,1270.9878,281.6294,1277.19,289.28" style="stroke:#FF0000;stroke-width:1.0;" /></g><!--link VIA to Observation--><g id="link_VIA_Observation"><path codeLine="58" d="M1035.58,67.97 C975.19,71.42 826.74,87.17 731.5,159 C709.19,175.83 690.99,199.63 676.76,223.49 " fill="none" id="VIA-to-Observation" style="stroke:#FF0000;stroke-width:1.0;" /><polygon fill="#FF0000" points="674.15,227.94,682.1518,222.1979,676.6782,223.6263,675.2499,218.1527,674.15,227.94" style="stroke:#FF0000;stroke-width:1.0;" /></g><!--link VIA to DiagnosticReport--><g id="link_VIA_DiagnosticReport"><path codeLine="59" d="M1035.75,67.99 C986.9,71.36 883.76,86.12 834.5,150 C820.59,168.04 813.94,190.79 811.36,213.49 " fill="none" id="VIA-to-DiagnosticReport" style="stroke:#FF0000;stroke-width:1.0;" /><polygon fill="#FF0000" points="810.84,218.64,815.7206,210.0855,811.3403,213.6651,807.7607,209.2849,810.84,218.64" style="stroke:#FF0000;stroke-width:1.0;" /></g><!--link VIA to Condition--><g id="link_VIA_Condition"><path codeLine="61" d="M1035.76,66.94 C919.22,67.21 456.64,73.72 345.5,159 C305.86,189.42 291.01,249.09 285.56,284.41 " fill="none" id="VIA-to-Condition" style="stroke:#FF0000;stroke-width:1.0;" /><polygon fill="#FF0000" points="284.82,289.44,290.0661,281.1046,285.5351,284.4914,282.1483,279.9604,284.82,289.44" style="stroke:#FF0000;stroke-width:1.0;" /></g><!--link VIA to DocumentReference--><g id="link_VIA_DocumentReference"><path codeLine="62" d="M1035.79,68.93 C941.6,76.15 626.18,104.03 543.5,159 C510.78,180.75 486.54,217.41 470.24,249.44 " fill="none" id="VIA-to-DocumentReference" style="stroke:#FF0000;stroke-width:1.0;" /><polygon fill="#FF0000" points="467.89,254.14,475.5006,247.8887,470.1318,249.6707,468.3498,244.3019,467.89,254.14" style="stroke:#FF0000;stroke-width:1.0;" /></g><!--link VIA to Immunization--><g id="link_VIA_Immunization"><path codeLine="63" d="M1035.62,66.53 C906.94,64.77 354.38,63 218.5,159 C176.59,188.61 157.5,248.57 149.55,284.16 " fill="none" id="VIA-to-Immunization" style="stroke:#FF0000;stroke-width:1.0;" /><polygon fill="#FF0000" points="148.45,289.23,154.2629,281.2795,149.5074,284.3431,146.4438,279.5876,148.45,289.23" style="stroke:#FF0000;stroke-width:1.0;" /></g><!--link HDR to DiagnosticReport--><g id="link_HDR_DiagnosticReport"><path codeLine="65" d="M1135.56,90.41 C1127.45,99.01 1117.36,108.09 1106.5,114 C1026.86,157.36 980.43,105.12 907.5,159 C888.01,173.4 872.17,193.5 859.59,214.42 " fill="none" id="HDR-to-DiagnosticReport" style="stroke:#008000;stroke-width:1.0;" /><polygon fill="#008000" points="856.96,218.9,864.9842,213.1893,859.5051,214.5962,858.0981,209.1171,856.96,218.9" style="stroke:#008000;stroke-width:1.0;" /></g><!--link HDR to AllergyIntolerance--><g id="link_HDR_AllergyIntolerance"><path codeLine="66" d="M1137.44,90.11 C1124.04,108.52 1105.09,135.08 1089.5,159 C1061.37,202.17 1031.08,253.83 1013.23,284.86 " fill="none" id="HDR-to-AllergyIntolerance" style="stroke:#008000;stroke-width:1.0;" /><polygon fill="#008000" points="1010.69,289.28,1018.6406,283.4673,1013.1799,284.9441,1011.7031,279.4834,1010.69,289.28" style="stroke:#008000;stroke-width:1.0;" /></g><!--link HDR to Patient--><g id="link_HDR_Patient"><path codeLine="68" d="M1173.25,90.31 C1181.58,99.12 1192.09,108.36 1203.5,114 C1321.23,172.15 1392.57,77.47 1495.5,159 C1533.01,188.71 1547.96,244.71 1553.82,280.23 " fill="none" id="HDR-Patient" style="stroke:#008000;stroke-width:1.0;stroke-dasharray:7.0,7.0;" /></g><!--link HDR to Practitioner--><g id="link_HDR_Practitioner"><path codeLine="69" d="M1174.12,90.05 C1182.43,98.6 1192.69,107.73 1203.5,114 C1264.82,149.55 1303.08,112.41 1356.5,159 C1394.38,192.04 1412.51,250 1420.33,284.46 " fill="none" id="HDR-to-Practitioner" style="stroke:#008000;stroke-width:1.0;" /><polygon fill="#008000" points="1421.41,289.37,1423.3893,279.7221,1420.339,284.4861,1415.575,281.4357,1421.41,289.37" style="stroke:#008000;stroke-width:1.0;" /></g><!--link HDR to Location--><g id="link_HDR_Location"><path codeLine="70" d="M1153.94,90.1 C1152.83,135.24 1150.39,235.05 1149.19,284.13 " fill="none" id="HDR-to-Location" style="stroke:#008000;stroke-width:1.0;" /><polygon fill="#008000" points="1149.07,289.29,1153.2746,280.3838,1149.1843,284.2913,1145.2767,280.2009,1149.07,289.29" style="stroke:#008000;stroke-width:1.0;" /></g><!--link HDR to Organization--><g id="link_HDR_Organization"><path codeLine="71" d="M1169.14,90.09 C1180.59,108.49 1196.68,135.05 1209.5,159 C1232.5,201.97 1256.21,253.39 1270.14,284.47 " fill="none" id="HDR-to-Organization" style="stroke:#008000;stroke-width:1.0;" /><polygon fill="#008000" points="1272.29,289.28,1272.2585,279.4312,1270.2447,284.7175,1264.9585,282.7036,1272.29,289.28" style="stroke:#008000;stroke-width:1.0;" /></g><!--reverse link fhir to API--><g id="link_fhir_API"><path codeLine="74" d="M52.5,432.2456 C52.5,432.7411 52.5,433.2351 52.5,433.7277 C52.5,434.7128 52.5,435.692 52.5,436.6647 C52.5,440.5556 52.5,444.3427 52.5,447.9886 C52.5,455.2805 52.5,462.0075 52.5,467.87 " fill="none" id="fhir-backto-API" style="stroke:#181818;stroke-width:1.0;" /><polygon fill="#181818" points="52.5,432.2456,48.5,441.2456,52.5,437.2456,56.5,441.2456,52.5,432.2456" style="stroke:#181818;stroke-width:1.0;" /></g></g></svg>
<figcaption><b>Figure: Data flow</b></figcaption>
</figure>
<p><br clear="all" /></p>

<h3 id="utility-resources">Utility Resources</h3>

<p>Note that these resources are used purely to provide linkage, they are minimally populated based on the information MHV receives. Often that means all that is populated is an identifier.</p>

<ul>
  <li><a href="StructureDefinition-VA.MHV.PHR.patient.html">Patient</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.patient-examples.html">Examples</a></li>
    </ul>
  </li>
  <li><a href="StructureDefinition-VA.MHV.PHR.practitioner.html">Practitioner</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.practitioner-mappings.html#mappings-for-via-to-mhv-fhir-phr-userto">Mappings from VIA - UserTO</a></li>
      <li><a href="StructureDefinition-VA.MHV.PHR.practitioner-mappings.html#mappings-for-via-to-mhv-fhir-phr-authorto">Mappings from VIA - AuthorTO</a></li>
      <li><a href="StructureDefinition-VA.MHV.PHR.practitioner-examples.html">Examples</a></li>
    </ul>
  </li>
  <li><a href="StructureDefinition-VA.MHV.PHR.location.html">Location</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.location-mappings.html#mappings-for-via-to-mhv-fhir-phr-hospitallocationto">Mappings from VIA - HospitalAllocationTO</a></li>
      <li><a href="StructureDefinition-VA.MHV.PHR.location-examples.html">Examples</a></li>
    </ul>
  </li>
  <li><a href="StructureDefinition-VA.MHV.PHR.organization.html">Organization</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.organization-mappings.html#mappings-for-via-to-mhv-fhir-phr-labsiteto">Mapping from VIA - LabSiteTO</a></li>
      <li><a href="StructureDefinition-VA.MHV.PHR.organization-mappings.html#mappings-for-hdr-to-mhv-fhir-phr-performingorganization">Mapping from HDR - PerformingOrganization</a></li>
      <li><a href="StructureDefinition-VA.MHV.PHR.organization-examples.html">Examples</a></li>
    </ul>
  </li>
</ul>

<h3 id="mapping-clinical-resources">mapping Clinical Resources</h3>

<p>This section is dedicated to instructions on how MHV will transition the data we receive into FHIR format. The priority order is:</p>

<ol>
  <li>Allergy</li>
  <li>Immunization</li>
  <li>Notes</li>
  <li>Radiology Report</li>
  <li>Vitals</li>
  <li>Conditions</li>
  <li>Chem-Hem</li>
  <li>Micro / Path Lab Reports</li>
  <li>EKG/ECG - not likely to continue as no longer get useful reports</li>
</ol>

<h4 id="allergy">Allergy</h4>

<p><a href="StructureDefinition-VA.MHV.PHR.allergyIntolerance.html#notes">Allergy and Intolerance</a> Mapping Notes</p>

<ul>
  <li><a href="StructureDefinition-VA.MHV.PHR.allergyIntolerance-mappings.html#mappings-for-hdr-allergy-to-mhv-fhir-phr-intolerancecondition">Mappings from HDR Allergy</a></li>
  <li><a href="StructureDefinition-VA.MHV.PHR.allergyIntolerance-examples.html">Examples</a></li>
</ul>

<h4 id="chem-hem">Chem-Hem</h4>

<p><a href="StructureDefinition-VA.MHV.PHR.chReport.html#notes">Chem-Hem (CH) Diagnostic Report</a> Mapping Notes</p>

<ul>
  <li><a href="StructureDefinition-VA.MHV.PHR.chReport-mappings.html#mappings-for-hdr-to-mhv-fhir-phr-labtestpromises">Mapping from HDR labTestPromises to DiagnosticReport</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.chReport-examples.html">Examples</a></li>
    </ul>
  </li>
  <li>contained <a href="StructureDefinition-VA.MHV.PHR.chSpecimen.html">Specimen</a>
    <ul>
      <li>Mappings from <a href="StructureDefinition-VA.MHV.PHR.chSpecimen-mappings.html#mappings-for-hdr-labtestpromises-specimen-to-mhv-fhir-phr-labtestpromises-specimen">HDR labTestPromises.specimen</a></li>
    </ul>
  </li>
  <li>contained Results <a href="StructureDefinition-VA.MHV.PHR.chTest.html">Observation(s)</a>
    <ul>
      <li>Mapping from <a href="StructureDefinition-VA.MHV.PHR.chTest-mappings.html#mappings-for-hdr-labtests-to-mhv-fhir-phr-labtestpromises-labtests">HDR labTests</a></li>
    </ul>
  </li>
  <li>contained Orders <a href="StructureDefinition-VA.MHV.PHR.chOrder.html">ServiceRequest(s)</a>
    <ul>
      <li>Mapping from <a href="StructureDefinition-VA.MHV.PHR.chOrder-mappings.html#mappings-for-hdr-labtests-order-to-mhv-fhir-phr-labtestpromises-labtests-orderedtestcode">HDR labTests.orderedTestCode</a></li>
    </ul>
  </li>
</ul>

<h4 id="condition">Condition</h4>

<p><a href="StructureDefinition-VA.MHV.PHR.condition.html#notes">Conditions</a> Mapping Notes</p>

<ul>
  <li><a href="StructureDefinition-VA.MHV.PHR.condition-mappings.html#mappings-for-via-to-mhv-fhir-phr-problemto">Mapping from VIA - ProblemTO</a></li>
  <li><a href="StructureDefinition-VA.MHV.PHR.condition-examples.html">Examples</a></li>
</ul>

<h4 id="ecg">ECG</h4>

<p><a href="StructureDefinition-VA.MHV.PHR.ecg.html#notes">ECG</a> Mapping Notes</p>

<ul>
  <li><a href="StructureDefinition-VA.MHV.PHR.ecg-mappings.html#mappings-for-via-to-mhv-fhir-phr-clinicalprocedureto">Mapping from VIA - ClinicalProcedureTO</a></li>
  <li><a href="StructureDefinition-VA.MHV.PHR.ecg-examples.html">Examples</a></li>
</ul>

<h4 id="imaging-reports">Imaging Reports</h4>

<p><a href="StructureDefinition-VA.MHV.PHR.imaging.html#notes">Imaging Reports</a> Mapping Notes</p>

<ul>
  <li><a href="StructureDefinition-VA.MHV.PHR.imaging-mappings.html#mappings-for-via-to-mhv-fhir-phr-imagingexamto">Mapping from VIA - ImagingExamTO</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.imaging-examples.html">Examples</a></li>
    </ul>
  </li>
  <li>Contained <a href="StructureDefinition-VA.MHV.PHR.irOrder.html">ServiceRequest</a></li>
</ul>

<h4 id="immunization">Immunization</h4>

<p><a href="StructureDefinition-VA.MHV.PHR.immunization.html#notes">Immunization</a> Mapping Notes</p>

<ul>
  <li><a href="StructureDefinition-VA.MHV.PHR.immunization-mappings.html#mappings-for-via-to-mhv-fhir-phr-immunizationto">Mapping from VIA - ImmunizationTO</a></li>
  <li><a href="StructureDefinition-VA.MHV.PHR.immunization-examples.html">Examples</a></li>
</ul>

<h4 id="pathology-labreport">Pathology LabReport</h4>

<p><a href="StructureDefinition-VA.MHV.PHR.SPlabReport.html#notes">Pathology LabReport</a>  Mapping Notes</p>

<ul>
  <li><a href="StructureDefinition-VA.MHV.PHR.SPlabReport-mappings.html#mappings-for-via-to-mhv-fhir-phr-labreportto">Mapping from VIA - SP LabReportTO +</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.SPlabReport-examples.html">Examples</a></li>
    </ul>
  </li>
  <li>Contained <a href="StructureDefinition-VA.MHV.PHR.LabSpecimen.html">Specimen</a>
    <ul>
      <li>Mapping from <a href="StructureDefinition-VA.MHV.PHR.LabSpecimen-mappings.html#mappings-for-via-to-mhv-fhir-phr-labspecimen">VIA LabSpecimen</a></li>
    </ul>
  </li>
  <li>Contained <a href="StructureDefinition-VA.MHV.PHR.labTest.html">Observation</a>
    <ul>
      <li>Mapping from <a href="StructureDefinition-VA.MHV.PHR.labTest-mappings.html#mappings-for-via-to-mhv-fhir-phr-labtestto">VIA LabTestTO</a></li>
    </ul>
  </li>
</ul>

<h4 id="microbiology-labreport">Microbiology LabReport</h4>

<p><a href="StructureDefinition-VA.MHV.PHR.MBlabReport.html#notes">Microbiology LabReport</a> Mapping Notes</p>

<ul>
  <li><a href="StructureDefinition-VA.MHV.PHR.MBlabReport-mappings.html#mappings-for-via-to-mhv-fhir-phr-labreportto">Mapping from VIA - MB LabReportTO +</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.MBlabReport-examples.html">Examples</a></li>
    </ul>
  </li>
  <li>Contained <a href="StructureDefinition-VA.MHV.PHR.LabSpecimen.html">Specimen</a>
    <ul>
      <li>Mapping from <a href="StructureDefinition-VA.MHV.PHR.LabSpecimen-mappings.html#mappings-for-via-to-mhv-fhir-phr-labspecimen">VIA LabSpecimen</a></li>
    </ul>
  </li>
  <li>Contained <a href="StructureDefinition-VA.MHV.PHR.labTest.html">Observation</a>
    <ul>
      <li>Mapping from <a href="StructureDefinition-VA.MHV.PHR.labTest-mappings.html#mappings-for-via-to-mhv-fhir-phr-labtestto">VIA LabTestTO</a></li>
    </ul>
  </li>
</ul>

<h4 id="notes">Notes</h4>

<p><a href="StructureDefinition-VA.MHV.PHR.note.html#notes">Notes</a> Mapping Notes</p>

<ul>
  <li><a href="StructureDefinition-VA.MHV.PHR.note-mappings.html#mappings-for-via-to-mhv-fhir-phr-noteto">Mapping from VIA - NoteTO</a></li>
  <li><a href="StructureDefinition-VA.MHV.PHR.note-examples.html">Examples</a></li>
</ul>

<h4 id="vital-sign">Vital-Sign</h4>

<p>General <a href="StructureDefinition-VA.MHV.PHR.vitals.html#notes">Vital-Signs</a> Mapping Notes</p>

<ul>
  <li>Additional specifics for <a href="StructureDefinition-VA.MHV.PHR.vitalsBP.html">BP Vital-Signs</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.vitalsBP-examples.html">Examples</a></li>
    </ul>
  </li>
  <li>Additional specifics for <a href="StructureDefinition-VA.MHV.PHR.vitalsPain.html">Pain Vital-Signs</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.vitalsPain-examples.html">Examples</a></li>
    </ul>
  </li>
  <li>Additional specifics for <a href="StructureDefinition-VA.MHV.PHR.vitalsOx.html">Pulse-OX Vital-Signs</a>
    <ul>
      <li><a href="StructureDefinition-VA.MHV.PHR.vitalsOx-examples.html">Examples</a></li>
    </ul>
  </li>
  <li>other <a href="StructureDefinition-VA.MHV.PHR.vitals-examples.html">Examples</a></li>
</ul>

<h3 id="potential">potential</h3>

<h4 id="medication">medication</h4>

<p>No longer being developed here.</p>

<ul>
  <li>Medications
    <ul>
      <li>See <a href="StructureDefinition-VA.MHV.PHR.medicationRequest.html#notes">Medication Request notes</a></li>
      <li>support API for current feature where VA prescribed medications are displayed and where online dispensing is avail the veteran can request dispense</li>
      <li>Note that this is not defined yet what is the source or goal.</li>
      <li>I understand that the interface will be using HL7 v2 feed, and CMOP. I note that VIA does have a schema for a MedicationTO.</li>
      <li>I have heard that there are questions on how to best fit the FHIR medication concept domain.</li>
      <li>Should support Cerner in the future.</li>
      <li>non-VA meds is not in scope</li>
      <li>PGHD meds is not in scope</li>
    </ul>
  </li>
  <li>Enforcement of Business rules: Today this is enforced as data comes into the PHR, the data that should not be seen is not persisted. This works as the PHR is refreshed often. But with FHIR server we are persisting, and thus the business rule such as a timeframe to wait before showing the patient would need to be enforced on the FHIR API, not on the data feed.</li>
</ul>

<h4 id="other">other</h4>

<ul>
  <li>Eventually this same API would support data from Cerner. Thus the same API providing comprehensive data from Vista and/or Cerner where ever it is.</li>
  <li>Provenance – track where the data has come from, and if from multiple places track all.</li>
  <li>Grahame - Intermediaries White Paper – https://confluence.hl7.org/display/FHIR/Intermediaries+White+Paper</li>
  <li>HL7 FAST - Exchange Routing – http://hl7.org/fhir/R4/us/exchange-routing/</li>
</ul>

<p>unknown (FHIR supports the following topics but unclear if this data exists in PHR)</p>

<ul>
  <li>care plan / care team resources</li>
  <li>encounter resources</li>
  <li>device resources</li>
  <li>goal resources</li>
  <li>procedure resources</li>
  <li>questionnaire / questionnaireResponse resources</li>
  <li>related person resources</li>
  <li>service request resources</li>
  <li>coverage resources</li>
</ul>

<p>The use of FHIR AuditEvent should be used to track all uses of the FHIR API. This is a base configuration of the HAPI FHIR Server. See IHE Implementation Guide on the use of <a href="https://profiles.ihe.net/ITI/BALP/index.html">Basic Audit Log Patterns</a></p>

<h2 id="data-input-processing">Data input processing</h2>

<p>General Pattern</p>

<ol>
  <li>Our FHIR database will have a Patient resource that is created as needed from the MHV Patient Profile. It contains minimal elements. The Patient is intended simply for API use.</li>
  <li>Our FHIR database will assign Resource id value naturally using normal HAPI method (likely UUID)</li>
  <li>Our FHIR database will put external identifiers (e.g. Those from the Vista id such as ImmunizationTO.id) into the .identifier element</li>
  <li>The support Resources (Location, Organization, Practitioner, etc) will be contained in the primary clinical FHIR Resource. This because MHV is not told enough about these to properly identify and keep de-duplicated. For example when an Immunization was given at a specific location, we point at a Location resource that is contained in the Immunization with the details.</li>
  <li>Updates vs Deletes -  using <a href="background.html#entered-in-error">Index-Update-and-Delete</a></li>
</ol>

<figure>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" preserveAspectRatio="none" version="1.1" viewBox="0 0 777 858" zoomAndPan="magnify"><defs /><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144" x="317.5" y="29.5332">Backend Processing</text><rect fill="none" height="603.2188" style="stroke:#000000;stroke-width:1.5;" width="760" x="10" y="230.9766" /><rect fill="none" height="170.1094" style="stroke:#000000;stroke-width:1.5;" width="514" x="20" y="256.3281" /><rect fill="none" height="142.1094" style="stroke:#000000;stroke-width:1.5;" width="648" x="20" y="685.0859" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="76" x2="76" y1="76.2188" y2="851.1953" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="203" x2="203" y1="76.2188" y2="851.1953" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="317" x2="317" y1="76.2188" y2="851.1953" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="476" x2="476" y1="76.2188" y2="851.1953" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="624" x2="624" y1="76.2188" y2="851.1953" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="714" x2="714" y1="76.2188" y2="851.1953" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="30" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="37" y="65.1426">vets-website</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="171" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="178" y="65.1426">vets-api</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="283" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="290" y="65.1426">MHV API</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="428" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="435" y="65.1426">PHR Refresh</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="590" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="597" y="65.1426">FHIR DB</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="668" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="675" y="65.1426">MHV Authen</text><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="191" y1="108.5703" y2="104.5703" /><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="191" y1="108.5703" y2="112.5703" /><line style="stroke:#181818;stroke-width:1.0;" x1="76" x2="202" y1="108.5703" y2="108.5703" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="83" y="103.7139">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="94" y="103.7139">GET /vitals</text><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="191" y1="138.9219" y2="134.9219" /><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="191" y1="138.9219" y2="142.9219" /><line style="stroke:#181818;stroke-width:1.0;" x1="76" x2="202" y1="138.9219" y2="138.9219" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="83" y="134.0654">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="94" y="134.0654">GET /status</text><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="305" y1="169.2734" y2="165.2734" /><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="305" y1="169.2734" y2="173.2734" /><line style="stroke:#181818;stroke-width:1.0;" x1="203" x2="316" y1="169.2734" y2="169.2734" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="210" y="164.417">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="221" y="164.417">POST /status</text><line style="stroke:#181818;stroke-width:1.0;" x1="474" x2="464" y1="215.9766" y2="211.9766" /><line style="stroke:#181818;stroke-width:1.0;" x1="474" x2="464" y1="215.9766" y2="219.9766" /><line style="stroke:#181818;stroke-width:1.0;" x1="317" x2="475" y1="215.9766" y2="215.9766" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="324" y="202.9443">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="335" y="194.7686">Kick off PHR Refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="339" y="211.1201">for single patient</text><path d="M10,230.9766 L71,230.9766 L71,239.3281 L61,249.3281 L10,249.3281 L10,230.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="603.2188" style="stroke:#000000;stroke-width:1.5;" width="760" x="10" y="230.9766" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="245.4717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="154" x="86" y="244.3955">[PHR Refresh Not Complete]</text><path d="M20,256.3281 L93,256.3281 L93,264.6797 L83,274.6797 L20,274.6797 L20,256.3281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="170.1094" style="stroke:#000000;stroke-width:1.5;" width="514" x="20" y="256.3281" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="35" y="270.8232">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="207" x="108" y="269.7471">[Every Second until data is refreshed]</text><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="191" y1="297.0313" y2="293.0313" /><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="191" y1="297.0313" y2="301.0313" /><line style="stroke:#181818;stroke-width:1.0;" x1="76" x2="202" y1="297.0313" y2="297.0313" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="83" y="292.1748">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="94" y="292.1748">GET /status</text><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="305" y1="327.3828" y2="323.3828" /><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="305" y1="327.3828" y2="331.3828" /><line style="stroke:#181818;stroke-width:1.0;" x1="203" x2="316" y1="327.3828" y2="327.3828" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="210" y="322.5264">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="221" y="322.5264">GET /status</text><line style="stroke:#181818;stroke-width:1.0;" x1="474" x2="464" y1="357.7344" y2="353.7344" /><line style="stroke:#181818;stroke-width:1.0;" x1="474" x2="464" y1="357.7344" y2="361.7344" /><line style="stroke:#181818;stroke-width:1.0;" x1="317" x2="475" y1="357.7344" y2="357.7344" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="324" y="352.8779">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="335" y="352.8779">is refresh complete?</text><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="214" y1="388.0859" y2="384.0859" /><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="214" y1="388.0859" y2="392.0859" /><line style="stroke:#181818;stroke-width:1.0;" x1="203" x2="316" y1="388.0859" y2="388.0859" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="220" y="383.2295">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="231" y="383.2295">return 500</text><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="87" y1="418.4375" y2="414.4375" /><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="87" y1="418.4375" y2="422.4375" /><line style="stroke:#181818;stroke-width:1.0;" x1="76" x2="202" y1="418.4375" y2="418.4375" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="93" y="413.5811">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="104" y="413.5811">return 202</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="770" y1="434.4375" y2="434.4375" /><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="133" x="15" y="445.8564">[PHR Refresh Complete]</text><line style="stroke:#181818;stroke-width:1.0;" x1="622" x2="612" y1="471.625" y2="467.625" /><line style="stroke:#181818;stroke-width:1.0;" x1="622" x2="612" y1="471.625" y2="475.625" /><line style="stroke:#181818;stroke-width:1.0;" x1="476" x2="623" y1="471.625" y2="471.625" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="483" y="466.7686">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="501" y="466.7686">Populate FHIR DB</text><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="191" y1="501.9766" y2="497.9766" /><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="191" y1="501.9766" y2="505.9766" /><line style="stroke:#181818;stroke-width:1.0;" x1="76" x2="202" y1="501.9766" y2="501.9766" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="83" y="497.1201">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="101" y="497.1201">GET /status</text><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="305" y1="532.3281" y2="528.3281" /><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="305" y1="532.3281" y2="536.3281" /><line style="stroke:#181818;stroke-width:1.0;" x1="203" x2="316" y1="532.3281" y2="532.3281" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="210" y="527.4717">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="228" y="527.4717">GET /status</text><line style="stroke:#181818;stroke-width:1.0;" x1="474" x2="464" y1="562.6797" y2="558.6797" /><line style="stroke:#181818;stroke-width:1.0;" x1="474" x2="464" y1="562.6797" y2="566.6797" /><line style="stroke:#181818;stroke-width:1.0;" x1="317" x2="475" y1="562.6797" y2="562.6797" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="324" y="557.8232">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="342" y="557.8232">is refresh complete?</text><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="214" y1="593.0313" y2="589.0313" /><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="214" y1="593.0313" y2="597.0313" /><line style="stroke:#181818;stroke-width:1.0;" x1="203" x2="316" y1="593.0313" y2="593.0313" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="220" y="588.1748">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="238" y="588.1748">return 200</text><line style="stroke:#181818;stroke-width:1.0;" x1="712" x2="702" y1="623.3828" y2="619.3828" /><line style="stroke:#181818;stroke-width:1.0;" x1="712" x2="702" y1="623.3828" y2="627.3828" /><line style="stroke:#181818;stroke-width:1.0;" x1="203" x2="713" y1="623.3828" y2="623.3828" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="210" y="618.5264">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="228" y="618.5264">Auth</text><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="214" y1="670.0859" y2="666.0859" /><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="214" y1="670.0859" y2="674.0859" /><line style="stroke:#181818;stroke-width:1.0;" x1="203" x2="713" y1="670.0859" y2="670.0859" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="220" y="657.0537">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="238" y="648.8779">return 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="238" y="665.2295">with Bearer Token</text><path d="M20,685.0859 L93,685.0859 L93,693.4375 L83,703.4375 L20,703.4375 L20,685.0859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="142.1094" style="stroke:#000000;stroke-width:1.5;" width="648" x="20" y="685.0859" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="35" y="699.5811">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="108" y="698.5049">[for any clinical data (e.g. Vitals)]</text><line style="stroke:#181818;stroke-width:1.0;" x1="622" x2="612" y1="725.7891" y2="721.7891" /><line style="stroke:#181818;stroke-width:1.0;" x1="622" x2="612" y1="725.7891" y2="729.7891" /><line style="stroke:#181818;stroke-width:1.0;" x1="203" x2="623" y1="725.7891" y2="725.7891" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="210" y="720.9326">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="228" y="720.9326">GET /vitals (with Bearer Token)</text><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="214" y1="772.4922" y2="768.4922" /><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="214" y1="772.4922" y2="776.4922" /><line style="stroke:#181818;stroke-width:1.0;" x1="203" x2="623" y1="772.4922" y2="772.4922" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="220" y="759.46">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="238" y="751.2842">return 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="238" y="767.6357">with  vitals data</text><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="87" y1="819.1953" y2="815.1953" /><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="87" y1="819.1953" y2="823.1953" /><line style="stroke:#181818;stroke-width:1.0;" x1="76" x2="202" y1="819.1953" y2="819.1953" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="93" y="806.1631">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="111" y="797.9873">return 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="111" y="814.3389">with vitals data</text></g></svg>
<figcaption><b>Figure: Backend Processing flow</b></figcaption>
</figure>
<p><br clear="all" /></p>

<h3 id="general-processing-of-clinical-resources">General Processing of clinical resources</h3>

<figure>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1050px" preserveAspectRatio="none" style="width:366px;height:1050px;background:#FFFFFF;" version="1.1" viewBox="0 0 366 1050" width="366px" zoomAndPan="magnify"><defs /><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142" x="110.5" y="34.5332">Update mhv-fhir-phr</text><ellipse cx="160.5" cy="58.6094" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;" /><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="263" x="29" y="88.6094" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="240" x="42" y="111.0664">triggered by PHR Refresh for a given Patient</text><rect fill="#F1F1F1" height="65.2813" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="236" x="42.5" y="198.7969" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="158" x="55.5" y="221.2539">read data VIA(VPR) and HDR</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="216" x="52.5" y="236.3477">receive a multiple entry SOAP message</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="128" x="52.5" y="251.4414">with current information</text><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="222" x="49.5" y="284.0781" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="168" x="62.5" y="306.5352">GET existing id/identifier matrix</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="59.5" y="321.6289">for this Domain from FHIR into matrix</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="94" y="398.2656" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="110" x="107" y="420.7227">convert data to FHIR</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="228" x="46.5" y="453.3594" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="59.5" y="475.8164">convert VIA/HDR</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="13" x="151.5" y="475.8164">.id</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="167.5" y="475.8164">to FHIR</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="53" x="211.5" y="475.8164">.identifier</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="95.5" y="508.4531" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107" x="108.5" y="530.9102">Add to FHIR Bundle</text><polygon fill="#F1F1F1" points="160.5,354.2656,172.5,366.2656,160.5,378.2656,148.5,366.2656,160.5,354.2656" style="stroke:#181818;stroke-width:0.5;" /><polygon fill="#F1F1F1" points="133.5,579.9961,187.5,579.9961,199.5,591.9961,187.5,603.9961,133.5,603.9961,121.5,591.9961,133.5,579.9961" style="stroke:#181818;stroke-width:0.5;" /><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="133.5" y="596.4971">more data?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="199.5" y="589.5791">yes</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="295" x="13" y="701.3428" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="272" x="26" y="723.7998">compare Bundle identifiers with id/identifier matrix</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="299" x="11" y="766.71" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="276" x="24" y="789.167">any missed id/identifier add Delete to FHIR Bundle</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="92.5" y="646.249" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="105.5" y="668.7061">for id/identifier matrix</text><polygon fill="#F1F1F1" points="121,821.8037,200,821.8037,212,833.8037,200,845.8037,121,845.8037,109,833.8037,121,821.8037" style="stroke:#181818;stroke-width:0.5;" /><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="121" y="838.3047">more id/identifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="212" y="831.3867">yes</text><rect fill="#F1F1F1" height="65.2813" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="278" x="21.5" y="865.8037" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="193" x="34.5" y="888.2607">Submit Transaction Bundle to FHIR</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="199" x="31.5" y="903.3545">FHIR server will match each entry on</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="53" x="233.5" y="903.3545">.identifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3" x="286.5" y="903.3545">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="139" x="31.5" y="918.4482">and update or create new</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="112" y="143.7031" /><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="74" x="125" y="166.1602">each Domain</text><polygon fill="#F1F1F1" points="124,951.085,197,951.085,209,963.085,197,975.085,124,975.085,112,963.085,124,951.085" style="stroke:#181818;stroke-width:0.5;" /><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="124" y="967.5859">more domains?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="209" y="960.668">yes</text><ellipse cx="160.5" cy="1028.3379" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;" /><ellipse cx="160.5" cy="1028.3379" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="68.6094" y2="88.6094" /><polygon fill="#181818" points="156.5,78.6094,160.5,88.6094,164.5,78.6094,160.5,82.6094" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="264.0781" y2="284.0781" /><polygon fill="#181818" points="156.5,274.0781,160.5,284.0781,164.5,274.0781,160.5,278.0781" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="433.3594" y2="453.3594" /><polygon fill="#181818" points="156.5,443.3594,160.5,453.3594,164.5,443.3594,160.5,447.3594" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="488.4531" y2="508.4531" /><polygon fill="#181818" points="156.5,498.4531,160.5,508.4531,164.5,498.4531,160.5,502.4531" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="378.2656" y2="398.2656" /><polygon fill="#181818" points="156.5,388.2656,160.5,398.2656,164.5,388.2656,160.5,392.2656" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="199.5" x2="286.5" y1="591.9961" y2="591.9961" /><polygon fill="#181818" points="282.5,480.9063,286.5,470.9063,290.5,480.9063,286.5,476.9063" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="286.5" x2="286.5" y1="366.2656" y2="591.9961" /><line style="stroke:#181818;stroke-width:1.0;" x1="286.5" x2="172.5" y1="366.2656" y2="366.2656" /><polygon fill="#181818" points="182.5,362.2656,172.5,366.2656,182.5,370.2656,178.5,366.2656" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="543.5469" y2="579.9961" /><polygon fill="#181818" points="156.5,569.9961,160.5,579.9961,164.5,569.9961,160.5,573.9961" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="334.2656" y2="354.2656" /><polygon fill="#181818" points="156.5,344.2656,160.5,354.2656,164.5,344.2656,160.5,348.2656" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="736.4365" y2="766.71" /><polygon fill="#181818" points="156.5,756.71,160.5,766.71,164.5,756.71,160.5,760.71" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="681.3428" y2="701.3428" /><polygon fill="#181818" points="156.5,691.3428,160.5,701.3428,164.5,691.3428,160.5,695.3428" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="322" y1="833.8037" y2="833.8037" /><polygon fill="#181818" points="318,756.4365,322,746.4365,326,756.4365,322,752.4365" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="322" x2="322" y1="663.7959" y2="833.8037" /><line style="stroke:#181818;stroke-width:1.0;" x1="322" x2="228.5" y1="663.7959" y2="663.7959" /><polygon fill="#181818" points="238.5,659.7959,228.5,663.7959,238.5,667.7959,234.5,663.7959" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="801.8037" y2="821.8037" /><polygon fill="#181818" points="156.5,811.8037,160.5,821.8037,164.5,811.8037,160.5,815.8037" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="603.9961" y2="646.249" /><polygon fill="#181818" points="156.5,636.249,160.5,646.249,164.5,636.249,160.5,640.249" style="stroke:#181818;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="164.5" y="626.332">no</text><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="845.8037" y2="865.8037" /><polygon fill="#181818" points="156.5,855.8037,160.5,865.8037,164.5,855.8037,160.5,859.8037" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="178.7969" y2="198.7969" /><polygon fill="#181818" points="156.5,188.7969,160.5,198.7969,164.5,188.7969,160.5,192.7969" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="209" x2="340" y1="963.085" y2="963.085" /><polygon fill="#181818" points="336,563.5469,340,553.5469,344,563.5469,340,559.5469" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="340" x2="340" y1="161.25" y2="963.085" /><line style="stroke:#181818;stroke-width:1.0;" x1="340" x2="209" y1="161.25" y2="161.25" /><polygon fill="#181818" points="219,157.25,209,161.25,219,165.25,215,161.25" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="931.085" y2="951.085" /><polygon fill="#181818" points="156.5,941.085,160.5,951.085,164.5,941.085,160.5,945.085" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="123.7031" y2="143.7031" /><polygon fill="#181818" points="156.5,133.7031,160.5,143.7031,164.5,133.7031,160.5,137.7031" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="160.5" y1="975.085" y2="1017.3379" /><polygon fill="#181818" points="156.5,1007.3379,160.5,1017.3379,164.5,1007.3379,160.5,1011.3379" style="stroke:#181818;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="164.5" y="997.4209">no</text></g></svg>
<figcaption><b>Figure: Clinical Resource Processing flow</b></figcaption>
</figure>
<p><br clear="all" /></p>

<ul>
  <li>We do updates based on the .identifier. HAPI will find that resource, compare what it has with what we put in the bundle, and NOT do an update if there is no change. Thus we rely on HAPI to properly detect changes, so MHV code does not have to.</li>
  <li>The current/historic list could be used to place the current id on entries with the given identifier, these entries can be then marked as conditional update. Where as today it is a conditional update based on a lookup on the .identifier. This will improve the performance of the HAPI server as it will remove an indirect lookup. We can also know which entries are NEW, so we can mark them as create. <strong>MHV-54038</strong></li>
</ul>

<h2 id="entered-in-error">Entered-in-Error</h2>

<p>As data are removed or marked as entered-in-error on Vista, the MHV often is simply not informed about that object any more. With MHV eVault, this was handled by simply purging all PHR data each refresh. With FHIR database, we are a step away from the database and thus purging the database is not possible. We thus need some way to handle the cases where we previously learned of a resource, but it was then deleted, and we now are no longer told about it. The following are potential candidates. Wipe-and-Replace was used for atime, but it resulted in a large historic version filling up the FHIR database with no value.</p>

<p>Now using <strong>Index-Update-and-Delete</strong>, with the exception that Allergies we mark them with entered-in-error as we receive that status from HDR.</p>

<ol>
  <li><strong>Index-Update-and-Delete</strong>: This model:
    <ol>
      <li>pulls current FHIR resource <code class="language-plaintext highlighter-rouge">.identifier</code> values (use <code class="language-plaintext highlighter-rouge">_elements</code> <a href="http://hl7.org/fhir/R4/search.html#elements">parameter</a> to limit results to just identifiers, id),</li>
      <li>When updating the new data, remember the  <code class="language-plaintext highlighter-rouge">.identifier</code> that were refreshed.</li>
      <li>At the end, we can know which <code class="language-plaintext highlighter-rouge">.identifier</code> values were not updated. (most of the time there will be no unrefreshed data)</li>
      <li>We can <code class="language-plaintext highlighter-rouge">delete</code> those that were not updated</li>
      <li>– Note: Did not require moving to new HAPI Server.</li>
    </ol>
  </li>
  <li><strong>Index-Update-and-Expunge</strong>: This model:
    <ol>
      <li>pulls current FHIR resource <code class="language-plaintext highlighter-rouge">.identifier</code> values (use <code class="language-plaintext highlighter-rouge">_elements</code> <a href="http://hl7.org/fhir/R4/search.html#elements">parameter</a> to limit results to just identifiers, id, status),</li>
      <li>When updating the new VIA feed data, remember the  <code class="language-plaintext highlighter-rouge">.identifier</code> that were refreshed.</li>
      <li>At the end, we can know which <code class="language-plaintext highlighter-rouge">.identifier</code> values were not updated. (most of the time there will be no unrefreshed data)</li>
      <li>We can <code class="language-plaintext highlighter-rouge">patch</code> those that were not updated, by <code class="language-plaintext highlighter-rouge">.id</code>, status to <code class="language-plaintext highlighter-rouge">entered-in-error</code>,</li>
      <li>– Note: Patch is not supported in our current HAPI server.</li>
    </ol>
  </li>
  <li><strong>Update-and-Expunge</strong>: This model is made available with an updated HAPI Server (6.10.0) that has the ability to disable history. However with this version we can’t use Wipe-and-Replace as that will result in new id values being assigned at each refresh. So Update-and-Expunge is designed. Each VIA feed we convert to FHIR and request an update, but the HAPI server is smart enough to notice that nothing changed so it will not update the meta.lastUpdated. So we will add to our update the use of the  <code class="language-plaintext highlighter-rouge">http://hl7.org/fhir/R4/StructureDefinition/lastSourceSync</code> extension, with todays date/time (now). This will force an update. Thus after we have fully processed the VIA feed, we can then look for entries older than now that are still active. This will most of the time return an empty set, but if it does return resources, we will change them to entered-in-error and update them.</li>
  <li><strong>Wipe-and-Replace</strong>: Delete the patient’s specific Resource (e.g. delete all the Immunizations for this patient) and write using update current data from the VIA refresh – similar to eVault PHR today. The HAPI server notices an update, by business identifier, of a previously deleted resource, so it brings it back to non-deleted. Thus after a VIA refresh, only current resources are not-deleted. The drawback is that this keeps historic versions, with two versions per refresh, and _lastUpdated is always the refresh time. Also, the ones removed are not marked as entered-in-error. – <strong>January 2024, decided to abandon this as the database fills to fast with history, and we don’t need this history</strong></li>
  <li>Get VIA updated</li>
  <li>Get VDIF to expose their data</li>
  <li>Get VDIF to expose their data in FHIR form</li>
  <li>Use Lighthouse FHIR, and thus have the 24 hour problem</li>
  <li>Use Lighthouse FHIR, and use a hack for short-term data. Where we only add vitals seen in VIA in the last 24 hours (or some timeframe).</li>
  <li>Use HDR</li>
  <li>Use CDW somehow</li>
  <li>new event service? slack #ves-event-bus</li>
  <li>track updates, and notice when a VIA update does not include a record we previously had. This would be very expensive and memory intensive. Thus might be something we do only occationally at low compute time.</li>
</ol>

<h2 id="references">References</h2>

<p>Source of data received from VIA using a SOAP xml schema that might be from one of:</p>

<ul>
  <li><a href="https://github.com/department-of-veterans-affairs/mhv-np-via-wsclient/blob/development/src/main/resources/VIA_v4.0.7_uat.wsdl">VIA_v4.0.7_uat.wsdl</a></li>
  <li><a href="https://github.com/department-of-veterans-affairs/mhv-ap-vde-support/blob/development/src/test/wsdl/mockey-mdws3-service.wsdl">mockey-mdws3-service.wsdl</a></li>
  <li><a href="https://github.com/department-of-veterans-affairs/mhv-hla-app-ui/blob/dbb0301be4a17f31e67048300d72c87c0977aa09/hra-mock-via-app/src/main/java/gov/va/hra/integration/via/mock/ws/EmrService.wsdl">EmrService.wsdl</a></li>
  <li>VA <a href="http://www.vistapedia.com/index.php/Main_Page">Vista Fileman</a></li>
  <li>HDR / VHIM <a href="https://github.com/department-of-veterans-affairs/mhv-np-cds-wsclient/blob/development/src/main/resources/xsd/templates">mhv-np-cds-wsclient</a> schema.</li>
</ul>

<p>Vista Model</p>
<ul>
  <li><a href="https://vivian.worldvista.org/dox/">VistA Cross Reference Documentation (aka Vivian)</a></li>
  <li><a href="https://vivian.worldvista.org/vivian/">ViViaN Visualizing VistA and Namespaces</a></li>
  <li><a href="https://github.com/worldvista/vivian">ViViaN Github</a></li>
  <li><a href="https://yippy.health/brand/osehra">Open Source Health Records(OSEHRA)</a></li>
  <li><a href="https://vivian.worldvista.org/dox/filemanfiles.html">FileMan Files List</a></li>
</ul>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="api.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="utility.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2022+ <a style="color:var(--footer-hyperlink-text-color)" href="http://va.gov">VA Digital Services</a>.  Package va.mhv.fhir.phr#0.3.8 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Fri, Jul 12, 2024 09:49-0500">2024-07-12</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                  | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/department-of-veterans-affairs/mhv-fhir-phr-mapping/issues/new/choose">New Issue</a> | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/department-of-veterans-affairs/mhv-fhir-phr-mapping/issues">Issues</a>
                
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

